# apiVersion: argoproj.io/v1alpha1
# kind: Application
# metadata:
#   name: loki
# spec:
#   destination:
#     name: ''
#     namespace: loki
#     server: 'https://kubernetes.default.svc'
#   source:
#     path: production/helm/loki
#     repoURL: 'https://github.com/grafana/loki.git'
#     targetRevision: HEAD
#     helm:
#       parameters:
#         - name: loki.schemaConfig.configs[0].from
#           value: "2024-01-01"
#         - name: loki.schemaConfig.configs[0].store
#           value: tsdb
#         - name: loki.schemaConfig.configs[0].objectStore
#           value: s3
#         - name: loki.schemaConfig.configs[0].schema
#           value: v13
#         - name: loki.schemaConfig.configs[0].index.prefix
#           value: loki_index_
#         - name: loki.schemaConfig.configs[0].index.period
#           value: 24h
#         - name: loki.ingester.chunkEncoding
#           value: snappy
#         - name: loki.querier.maxConcurrent
#           value: '4'
#         - name: loki.pattern_ingester.enabled
#           value: 'true'
#         - name: loki.limits_config.allow_structured_metadata
#           value: 'true'
#         - name: loki.limits_config.volume_enabled
#           value: 'true'
#         - name: gateway.ingress.enabled
#           value: 'true'
#         - name: 'gateway.ingress.hosts[0].host'
#           value: lokigateway.schneiderhh.qzz.io
#         - name: 'gateway.ingress.tls[0].hosts[0]'
#           value: lokigateway.schneiderhh.qzz.io
#         - name: 'ingress.hosts[0]'
#           value: loki.schneiderhh.qzz.io
#         - name: ingress.enabled
#           value: 'true'
#         - name: deploymentMode
#           value: Distributed
#         - name: ingester.replicas
#           value: '3'
#         - name: querier.replicas
#           value: '3'
#         - name: querier.maxUnavailable
#           value: '2'
#         - name: queryFrontend.maxUnavailable
#           value: '1'
#         - name: queryFrontend.replicas
#           value: '2'
#         - name: queryScheduler.replicas
#           value: '2'
#         - name: distributor.maxUnavailable
#           value: '2'
#         - name: distributor.replicas
#           value: '3'
#         - name: compactor.replicas
#           value: '1'
#         - name: indexGateway.replicas
#           value: '2'
#         - name: indexGateway.maxUnavailable
#           value: '1'
#         - name: backend.replicas
#           value: '0'
#         - name: read.replicas
#           value: '0'
#         - name: write.replicas
#           value: '0'
#         - name: gateway.service.type
#           value: LoadBalancer
#         - name: minio.enabled
#           value: 'true'
#   sources: []
#   project: devops
#   syncPolicy:
#     automated:
#       prune: true
#       selfHeal: true
#     syncOptions:
#       - CreateNamespace=true
#     retry:
#       limit: 2
#       backoff:
#         duration: 5s
#         maxDuration: 3m0s
#         factor: 2
